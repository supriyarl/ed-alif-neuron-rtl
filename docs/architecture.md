# ED-ALIF Neuron Hardware Architecture

## 1. Overview

The **ED-ALIF (Event-Driven Adaptive Leaky Integrate-and-Fire) neuron** is a fully synthesizable digital neuron designed for FPGA implementation. It is optimized for **event-driven operation** to reduce switching activity and power consumption. Key features include:

- Spike-triggered adaptation (adaptive threshold)
- Input-event-driven decay of adaptation
- Refractory gating to prevent rapid consecutive spikes
- Saturating arithmetic for hardware safety
- Parameterizable width and leakage factors

This architecture is fully described in **SystemVerilog** and can be instantiated in larger neuromorphic designs.

---

## 2. Parameterization

| Parameter       | Width / Default | Description |
|-----------------|----------------|-------------|
| `V_WIDTH`       | 12 bits        | Membrane voltage width |
| `W_WIDTH`       | 8 bits         | Adaptation variable width |
| `LEAK_SHIFT`    | 4              | Leakage factor: `V >> LEAK_SHIFT` |
| `V_INIT`        | 12-bit signed  | Initial membrane voltage |
| `W_INIT`        | 8-bit unsigned | Initial adaptation value |
| `B`             | 8-bit unsigned | Spike-triggered adaptation increment |
| `D`             | 8-bit unsigned | Adaptation decay for input event |

This parameterization allows flexible configuration for different neuron behaviors and FPGA resource utilization.

---

## 3. Inputs and Outputs

| Signal            | Type         | Description |
|------------------|--------------|-------------|
| `clk`             | logic        | Clock signal |
| `rst`             | logic        | Synchronous reset |
| `enable`          | logic        | Neuron scheduled for update |
| `I_syn`           | signed [V_WIDTH-1:0] | Incoming synaptic current |
| `V_th`            | signed [V_WIDTH-1:0] | Base threshold voltage |
| `V_reset`         | signed [V_WIDTH-1:0] | Reset voltage after spike |
| `B`               | [W_WIDTH-1:0] | Adaptation increment on spike |
| `D`               | [W_WIDTH-1:0] | Adaptation decay on input event |
| `input_event`     | logic        | Incoming spike event |
| `refract_cnt`     | [3:0]        | External refractory counter |

**Outputs:**

| Signal      | Type         | Description |
|------------|--------------|-------------|
| `spike`    | logic        | Spike generated by neuron |
| `V_out`    | signed [V_WIDTH-1:0] | Membrane voltage output |
| `W_out`    | [W_WIDTH-1:0] | Adaptation variable output |

---

## 4. Datapath

The neuron datapath is divided into **registered state** and **combinational computation**:

### 4.1 Registers

| Register | Description |
|----------|------------|
| `V_reg` | Membrane voltage storage |
| `W_reg` | Spike-triggered adaptation storage |

### 4.2 Combinational Logic

| Component        | Description |
|-----------------|------------|
| `leak`          | Computed as `V_reg >>> LEAK_SHIFT` for efficient FPGA shift operation |
| `thresh_eff`    | Effective threshold: `V_th + W_reg` |
| `V_int`         | Next membrane potential: `V_reg + I_syn - leak - W_reg` |
| `spike`         | Generated when `enable` is high, `V_int >= thresh_eff`, and `refract_cnt == 0` |

### 4.3 Next-State Logic

1. **If neuron is enabled:**
   - **Spike event**:
     - `V_next = V_reset`
     - `W_next = min(W_reg + B, max(W_reg))` (saturating addition)
   - **No spike**:
     - `V_next = V_int`
     - **Input event decay**: `W_next = max(W_reg - D, 0)`

2. **Otherwise**, retain previous state.

### 4.4 State Update

Registers are updated on the **rising edge of the clock**:

```systemverilog
always_ff @(posedge clk) begin
    if (rst) begin
        V_reg <= V_INIT;
        W_reg <= W_INIT;
    end else begin
        V_reg <= V_next;
        W_reg <= W_next;
    end
end
---
